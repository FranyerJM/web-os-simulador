{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frany/Franyer/Universidad/7mo%20semestre/Sistemas%20de%20Operacion/Entregas/web-os-simulator/app/api/metadata/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\n\r\n// Memoria temporal del servidor (se borra si reinicias la consola)\r\n// Esto permite que el teléfono y la PC compartan datos.\r\nlet eventsQueue: any[] = []\r\n\r\nexport async function GET(request: Request) {\r\n  const { searchParams } = new URL(request.url)\r\n  const myNumber = searchParams.get('number')\r\n\r\n  if (!myNumber) return NextResponse.json([])\r\n\r\n  // Buscar eventos dirigidos a mi número\r\n  const myEvents = eventsQueue.filter(event => event.to === myNumber)\r\n  \r\n  // Borrar los eventos ya entregados para no recibirlos dos veces\r\n  if (myEvents.length > 0) {\r\n    eventsQueue = eventsQueue.filter(event => event.to !== myNumber)\r\n  }\r\n\r\n  return NextResponse.json(myEvents)\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const body = await request.json()\r\n    // Guardar el evento en la cola\r\n    eventsQueue.push({\r\n      ...body,\r\n      timestamp: Date.now()\r\n    })\r\n    \r\n    // Limpieza automática: mantener solo los últimos 50 eventos para no saturar\r\n    if (eventsQueue.length > 50) {\r\n      eventsQueue = eventsQueue.slice(-50)\r\n    }\r\n\r\n    return NextResponse.json({ success: true })\r\n  } catch (error) {\r\n    return NextResponse.json({ error: 'Error procesando mensaje' }, { status: 500 })\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,mEAAmE;AACnE,wDAAwD;AACxD,IAAI,cAAqB,EAAE;AAEpB,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU,OAAO,+QAAY,CAAC,IAAI,CAAC,EAAE;IAE1C,uCAAuC;IACvC,MAAM,WAAW,YAAY,MAAM,CAAC,CAAA,QAAS,MAAM,EAAE,KAAK;IAE1D,gEAAgE;IAChE,IAAI,SAAS,MAAM,GAAG,GAAG;QACvB,cAAc,YAAY,MAAM,CAAC,CAAA,QAAS,MAAM,EAAE,KAAK;IACzD;IAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,+BAA+B;QAC/B,YAAY,IAAI,CAAC;YACf,GAAG,IAAI;YACP,WAAW,KAAK,GAAG;QACrB;QAEA,4EAA4E;QAC5E,IAAI,YAAY,MAAM,GAAG,IAAI;YAC3B,cAAc,YAAY,KAAK,CAAC,CAAC;QACnC;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF"}}]
}